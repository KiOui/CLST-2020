{% extends 'base.html' %}
{% block body %}
<div>
    <h5>Process {{ process.name }}</h5>
    <div>
        {% for profile in process.profiles %}
            <form method="post" class="accent-darker shadow rounded" id="form_{{ profile.id }}" enctype="multipart/form-data">
            {% csrf_token %}
            <h5>Profile {{ forloop.counter }}</h5>
            {%  for input_template in profile.input_templates %}
                {{ input_template.label }}
                <input type="file" accept="{{ input_template.extension }}" name="template_id_{{ input_template.id }}" {% if not input_template.optional %} required {% endif %} />
                <p>Accepts {{ input_template.extension }}</p>
            {% endfor %}
            <input type="hidden" name="form_handler" value="run_profile"/>
            <input type="hidden" name="profile_id" value="{{ profile.id }}"/>
            <input type="submit" class="btn btn-md" value="Run" id="button_{{ profile.id }}">
            </form>
        {% endfor %}
    </div>
</div>
{% endblock %}